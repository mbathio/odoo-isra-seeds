<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- Assistant Création Lot en Masse -->
        <record id="view_bulk_lot_creation_wizard" model="ir.ui.view">
            <field name="name">seed.bulk.lot.creation.wizard</field>
            <field name="model">seed.bulk.lot.wizard</field>
            <field name="arch" type="xml">
                <form string="Création de Lots en Masse">
                    <group>
                        <group>
                            <field name="variety_id" required="1"/>
                            <field name="level" required="1"/>
                            <field name="multiplier_id"/>
                            <field name="parcel_id" domain="[('multiplier_id', '=', multiplier_id)]"/>
                        </group>
                        <group>
                            <field name="production_date" required="1"/>
                            <field name="lot_count" required="1"/>
                            <field name="quantity_per_lot" required="1"/>
                            <field name="prefix"/>
                        </group>
                    </group>
                    <field name="notes" placeholder="Notes communes pour tous les lots..."/>
                    <footer>
                        <button name="create_lots" type="object" string="Créer les Lots" class="oe_highlight"/>
                        <button string="Annuler" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Assistant Contrôle Qualité Rapide -->
        <record id="view_quick_quality_control_wizard" model="ir.ui.view">
            <field name="name">seed.quick.quality.control.wizard</field>
            <field name="model">seed.quick.qc.wizard</field>
            <field name="arch" type="xml">
                <form string="Contrôle Qualité Rapide">
                    <group>
                        <group>
                            <field name="seed_lot_ids" widget="many2many_tags" required="1"/>
                            <field name="control_date" required="1"/>
                            <field name="inspector_id" required="1"/>
                        </group>
                        <group>
                            <field name="test_method"/>
                            <field name="laboratory"/>
                            <field name="sample_size"/>
                        </group>
                    </group>
                    <group string="Paramètres de Test">
                        <group>
                            <field name="germination_rate" required="1"/>
                            <field name="variety_purity" required="1"/>
                            <field name="moisture_content"/>
                        </group>
                        <group>
                            <field name="seed_health"/>
                            <field name="other_seeds"/>
                            <field name="inert_matter"/>
                        </group>
                    </group>
                    <field name="observations" placeholder="Observations communes..."/>
                    <footer>
                        <button name="create_quality_controls" type="object" string="Créer les Contrôles" class="oe_highlight"/>
                        <button string="Annuler" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Assistant Import Données -->
        <record id="view_data_import_wizard" model="ir.ui.view">
            <field name="name">seed.data.import.wizard</field>
            <field name="model">seed.data.import.wizard</field>
            <field name="arch" type="xml">
                <form string="Import de Données">
                    <group>
                        <field name="import_type" required="1"/>
                        <field name="file_data" filename="filename" required="1"/>
                        <field name="filename" invisible="1"/>
                        <field name="delimiter" attrs="{'invisible': [('import_type', '!=', 'csv')]}"/>
                    </group>
                    <field name="preview_data" readonly="1" widget="text"/>
                    <footer>
                        <button name="preview_import" type="object" string="Prévisualiser"/>
                        <button name="execute_import" type="object" string="Importer" class="oe_highlight"/>
                        <button string="Annuler" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Assistant Export Données -->
        <record id="view_data_export_wizard" model="ir.ui.view">
            <field name="name">seed.data.export.wizard</field>
            <field name="model">seed.data.export.wizard</field>
            <field name="arch" type="xml">
                <form string="Export de Données">
                    <group>
                        <group>
                            <field name="export_type" required="1"/>
                            <field name="date_from"/>
                            <field name="date_to"/>
                        </group>
                        <group>
                            <field name="include_quality_controls"/>
                            <field name="include_productions"/>
                            <field name="include_genealogy"/>
                            <field name="format" required="1"/>
                        </group>
                    </group>
                    <group string="Filtres" attrs="{'invisible': [('export_type', '!=', 'lots')]}">
                        <field name="variety_ids" widget="many2many_tags"/>
                        <field name="level_filter"/>
                        <field name="status_filter"/>
                    </group>
                    <footer>
                        <button name="generate_export" type="object" string="Générer Export" class="oe_highlight"/>
                        <button string="Annuler" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Assistant Génération QR Codes -->
        <record id="view_qr_code_generator_wizard" model="ir.ui.view">
            <field name="name">seed.qr.code.generator.wizard</field>
            <field name="model">seed.qr.generator.wizard</field>
            <field name="arch" type="xml">
                <form string="Génération QR Codes">
                    <group>
                        <group>
                            <field name="lot_ids" widget="many2many_tags" required="1"/>
                            <field name="qr_size"/>
                            <field name="include_logo"/>
                        </group>
                        <group>
                            <field name="format"/>
                            <field name="print_labels"/>
                            <field name="labels_per_page"/>
                        </group>
                    </group>
                    <group string="Informations à inclure">
                        <field name="include_variety"/>
                        <field name="include_level"/>
                        <field name="include_quantity"/>
                        <field name="include_multiplier"/>
                        <field name="include_dates"/>
                    </group>
                    <footer>
                        <button name="generate_qr_codes" type="object" string="Générer QR Codes" class="oe_highlight"/>
                        <button string="Annuler" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Assistant Planification Production -->
        <record id="view_production_planning_wizard" model="ir.ui.view">
            <field name="name">seed.production.planning.wizard</field>
            <field name="model">seed.production.planning.wizard</field>
            <field name="arch" type="xml">
                <form string="Planification de Production">
                    <group>
                        <group>
                            <field name="variety_id" required="1"/>
                            <field name="current_level" required="1"/>
                            <field name="target_level" required="1"/>
                            <field name="target_quantity" required="1"/>
                        </group>
                        <group>
                            <field name="season" required="1"/>
                            <field name="start_date" required="1"/>
                            <field name="multiplier_ids" widget="many2many_tags"/>
                        </group>
                    </group>
                    
                    <group string="Paramètres Automatiques">
                        <field name="auto_assign_parcels"/>
                        <field name="auto_create_contracts"/>
                        <field name="auto_schedule_activities"/>
                    </group>
                    
                    <separator string="Parcelles Recommandées"/>
                    <field name="recommended_parcel_ids" readonly="1">
                        <tree>
                            <field name="name"/>
                            <field name="multiplier_id"/>
                            <field name="area"/>
                            <field name="soil_type"/>
                            <field name="status"/>
                        </tree>
                    </field>
                    
                    <footer>
                        <button name="calculate_requirements" type="object" string="Calculer Besoins"/>
                        <button name="create_production_plan" type="object" string="Créer Plan" class="oe_highlight"/>
                        <button string="Annuler" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Actions pour les assistants -->
        <record id="action_bulk_lot_creation" model="ir.actions.act_window">
            <field name="name">Création de Lots en Masse</field>
            <field name="res_model">seed.bulk.lot.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record id="action_quick_quality_control" model="ir.actions.act_window">
            <field name="name">Contrôle Qualité Rapide</field>
            <field name="res_model">seed.quick.qc.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record id="action_data_import" model="ir.actions.act_window">
            <field name="name">Import de Données</field>
            <field name="res_model">seed.data.import.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record id="action_data_export" model="ir.actions.act_window">
            <field name="name">Export de Données</field>
            <field name="res_model">seed.data.export.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record id="action_qr_generator" model="ir.actions.act_window">
            <field name="name">Générateur QR Codes</field>
            <field name="res_model">seed.qr.generator.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record id="action_production_planning" model="ir.actions.act_window">
            <field name="name">Planification Production</field>
            <field name="res_model">seed.production.planning.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

    </data>
</odoo>