<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- Rapport Certificat de Qualit√© -->
        <record id="report_quality_certificate" model="ir.actions.report">
            <field name="name">Certificat de Qualit√©</field>
            <field name="model">seed.quality.control</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">isra_seeds.quality_certificate_template</field>
            <field name="report_file">isra_seeds.quality_certificate_template</field>
            <field name="binding_model_id" ref="model_seed_quality_control"/>
            <field name="binding_type">report</field>
        </record>

        <!-- Template Certificat de Qualit√© -->
        <template id="quality_certificate_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="oe_structure"/>
                            
                            <!-- En-t√™te du certificat -->
                            <div class="text-center mb-4">
                                <h1 class="text-primary">üèÜ CERTIFICAT DE QUALIT√â</h1>
                                <h3>Institut S√©n√©galais de Recherches Agricoles (ISRA)</h3>
                                <p class="text-muted">Centre de Saint-Louis</p>
                                <hr/>
                            </div>
                            
                            <!-- Num√©ro de certificat -->
                            <div class="row mb-4">
                                <div class="col-12 text-center">
                                    <div class="alert alert-info">
                                        <h4><strong>Certificat N¬∞: <t t-esc="doc.name"/></strong></h4>
                                        <p>Date d'√©mission: <span t-field="doc.control_date"/></p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Informations du lot -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h4>üì¶ Informations du Lot de Semences</h4>
                                    <table class="table table-bordered">
                                        <tr>
                                            <th width="30%">R√©f√©rence du Lot</th>
                                            <td><span t-field="doc.seed_lot_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <th>Vari√©t√©</th>
                                            <td><span t-field="doc.seed_lot_id.variety_id.name"/> (<span t-field="doc.seed_lot_id.variety_id.code"/>)</td>
                                        </tr>
                                        <tr>
                                            <th>Type de Culture</th>
                                            <td><span t-field="doc.seed_lot_id.variety_id.crop_type"/></td>
                                        </tr>
                                        <tr>
                                            <th>Niveau de Semence</th>
                                            <td><span t-field="doc.seed_lot_id.level"/></td>
                                        </tr>
                                        <tr>
                                            <th>Quantit√©</th>
                                            <td><span t-field="doc.seed_lot_id.quantity"/> kg</td>
                                        </tr>
                                        <tr>
                                            <th>Multiplicateur</th>
                                            <td><span t-field="doc.seed_lot_id.multiplier_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <th>Date de Production</th>
                                            <td><span t-field="doc.seed_lot_id.production_date"/></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- R√©sultats des tests -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h4>üî¨ R√©sultats des Tests</h4>
                                    <table class="table table-bordered">
                                        <tr>
                                            <th width="30%">Taux de Germination</th>
                                            <td><strong><span t-field="doc.germination_rate"/>%</strong></td>
                                        </tr>
                                        <tr>
                                            <th>Puret√© Vari√©tale</th>
                                            <td><strong><span t-field="doc.variety_purity"/>%</strong></td>
                                        </tr>
                                        <tr t-if="doc.moisture_content">
                                            <th>Taux d'Humidit√©</th>
                                            <td><span t-field="doc.moisture_content"/>%</td>
                                        </tr>
                                        <tr t-if="doc.seed_health">
                                            <th>Sant√© des Semences</th>
                                            <td><span t-field="doc.seed_health"/>%</td>
                                        </tr>
                                        <tr t-if="doc.thousand_grain_weight">
                                            <th>Poids de 1000 Grains</th>
                                            <td><span t-field="doc.thousand_grain_weight"/> g</td>
                                        </tr>
                                        <tr t-if="doc.total_impurities">
                                            <th>Total Impuret√©s</th>
                                            <td><span t-field="doc.total_impurities"/>%</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- R√©sultat final -->
                            <div class="row mb-4">
                                <div class="col-12 text-center">
                                    <div t-if="doc.result == 'pass'" class="alert alert-success">
                                        <h3>‚úÖ CONFORME</h3>
                                        <p>Ce lot de semences satisfait aux normes de qualit√© requises.</p>
                                    </div>
                                    <div t-if="doc.result == 'fail'" class="alert alert-danger">
                                        <h3>‚ùå NON CONFORME</h3>
                                        <p>Ce lot de semences ne satisfait pas aux normes de qualit√© requises.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Informations techniques -->
                            <div class="row mb-4">
                                <div class="col-6">
                                    <h5>üî¨ D√©tails Techniques</h5>
                                    <table class="table table-sm">
                                        <tr>
                                            <th>M√©thode de Test</th>
                                            <td><span t-field="doc.test_method"/></td>
                                        </tr>
                                        <tr t-if="doc.sample_size">
                                            <th>Taille √âchantillon</th>
                                            <td><span t-field="doc.sample_size"/> graines</td>
                                        </tr>
                                        <tr t-if="doc.laboratory">
                                            <th>Laboratoire</th>
                                            <td><span t-field="doc.laboratory"/></td>
                                        </tr>
                                        <tr t-if="doc.laboratory_ref">
                                            <th>R√©f. Laboratoire</th>
                                            <td><span t-field="doc.laboratory_ref"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="col-6">
                                    <h5>üë§ Inspection</h5>
                                    <table class="table table-sm">
                                        <tr>
                                            <th>Inspecteur</th>
                                            <td><span t-field="doc.inspector_id.name"/></td>
                                        </tr>
                                        <tr>
                                            <th>Date de Contr√¥le</th>
                                            <td><span t-field="doc.control_date"/></td>
                                        </tr>
                                        <tr t-if="doc.sample_date">
                                            <th>Date √âchantillonnage</th>
                                            <td><span t-field="doc.sample_date"/></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- Observations -->
                            <div t-if="doc.observations" class="row mb-4">
                                <div class="col-12">
                                    <h5>üìù Observations</h5>
                                    <div class="alert alert-light">
                                        <p t-field="doc.observations"/>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Recommandations -->
                            <div t-if="doc.recommendations" class="row mb-4">
                                <div class="col-12">
                                    <h5>üí° Recommandations</h5>
                                    <div class="alert alert-warning">
                                        <p t-field="doc.recommendations"/>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- QR Code -->
                            <div class="row mb-4">
                                <div class="col-12 text-center">
                                    <h5>üîç Code de Tra√ßabilit√©</h5>
                                    <img t-if="doc.seed_lot_id.qr_code_image" 
                                         t-att-src="image_data_uri(doc.seed_lot_id.qr_code_image)" 
                                         style="width: 150px; height: 150px;"/>
                                    <p class="text-muted">Scannez ce code pour acc√©der aux informations compl√®tes</p>
                                </div>
                            </div>
                            
                            <!-- Signature et validation -->
                            <div class="row mt-5">
                                <div class="col-6">
                                    <div class="text-center">
                                        <p>_________________________________</p>
                                        <p><strong>Inspecteur Qualit√©</strong></p>
                                        <p><span t-field="doc.inspector_id.name"/></p>
                                        <p>Date: <span t-field="doc.control_date"/></p>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="text-center">
                                        <p>_________________________________</p>
                                        <p><strong>Responsable Certification</strong></p>
                                        <p>ISRA Saint-Louis</p>
                                        <p>Date: <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%m/%Y')"/></p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Pied de page avec informations l√©gales -->
                            <div class="row mt-4">
                                <div class="col-12 text-center text-muted">
                                    <hr/>
                                    <small>
                                        Ce certificat est d√©livr√© conform√©ment aux standards ISTA (International Seed Testing Association)<br/>
                                        Institut S√©n√©galais de Recherches Agricoles - Centre de Saint-Louis<br/>
                                        BP 240 Saint-Louis, S√©n√©gal - T√©l: +221 33 961 15 81<br/>
                                        Email: direction@isra.sn - www.isra.sn
                                    </small>
                                </div>
                            </div>
                            
                            <div class="oe_structure"/>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <!-- Rapport √âtiquette Lot -->
        <record id="report_lot_label" model="ir.actions.report">
            <field name="name">√âtiquette Lot</field>
            <field name="model">seed.lot</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">isra_seeds.lot_label_template</field>
            <field name="report_file">isra_seeds.lot_label_template</field>
            <field name="binding_model_id" ref="model_seed_lot"/>
            <field name="binding_type">report</field>
            <field name="paperformat_id" ref="base.paperformat_euro"/>
        </record>

        <!-- Template √âtiquette Lot -->
        <template id="lot_label_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <div class="page" style="page-break-after: always;">
                        <div class="container-fluid">
                            <!-- √âtiquette format A6 -->
                            <div style="border: 2px solid #000; padding: 10px; height: 400px; font-size: 12px;">
                                <!-- En-t√™te -->
                                <div class="text-center mb-2">
                                    <strong style="font-size: 14px;">üåæ ISRA - Semences Certifi√©es</strong>
                                </div>
                                <hr style="margin: 5px 0;"/>
                                
                                <!-- Informations principales -->
                                <table style="width: 100%; font-size: 11px;">
                                    <tr>
                                        <td><strong>Lot:</strong></td>
                                        <td><span t-field="doc.name"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Vari√©t√©:</strong></td>
                                        <td><span t-field="doc.variety_id.name"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Code:</strong></td>
                                        <td><span t-field="doc.variety_id.code"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Culture:</strong></td>
                                        <td><span t-field="doc.variety_id.crop_type"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Niveau:</strong></td>
                                        <td><span t-field="doc.level"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Quantit√©:</strong></td>
                                        <td><span t-field="doc.quantity"/> kg</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Production:</strong></td>
                                        <td><span t-field="doc.production_date"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Expiration:</strong></td>
                                        <td><span t-field="doc.expiry_date"/></td>
                                    </tr>
                                    <tr t-if="doc.multiplier_id">
                                        <td><strong>Multiplicateur:</strong></td>
                                        <td><span t-field="doc.multiplier_id.name"/></td>
                                    </tr>
                                </table>
                                
                                <!-- QR Code -->
                                <div class="text-center mt-2">
                                    <img t-if="doc.qr_code_image" 
                                         t-att-src="image_data_uri(doc.qr_code_image)" 
                                         style="width: 80px; height: 80px;"/>
                                </div>
                                
                                <!-- Statut -->
                                <div class="text-center mt-2">
                                    <span t-if="doc.status == 'certified'" 
                                          style="background: #28a745; color: white; padding: 2px 8px; border-radius: 3px;">
                                        ‚úì CERTIFI√â
                                    </span>
                                    <span t-if="doc.status == 'pending'" 
                                          style="background: #ffc107; color: black; padding: 2px 8px; border-radius: 3px;">
                                        ‚è≥ EN ATTENTE
                                    </span>
                                    <span t-if="doc.status == 'rejected'" 
                                          style="background: #dc3545; color: white; padding: 2px 8px; border-radius: 3px;">
                                        ‚ùå REJET√â
                                    </span>
                                </div>
                                
                                <!-- Pied d'√©tiquette -->
                                <div style="position: absolute; bottom: 10px; width: calc(100% - 20px); text-align: center; font-size: 8px;">
                                    <hr style="margin: 2px 0;"/>
                                    ISRA Saint-Louis - www.isra.sn
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </template>

        <!-- Rapport G√©n√©alogie -->
        <record id="report_genealogy" model="ir.actions.report">
            <field name="name">Rapport de G√©n√©alogie</field>
            <field name="model">seed.lot</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">isra_seeds.genealogy_report_template</field>
            <field name="report_file">isra_seeds.genealogy_report_template</field>
            <field name="binding_model_id" ref="model_seed_lot"/>
            <field name="binding_type">report</field>
        </record>

        <!-- Template Rapport G√©n√©alogie -->
        <template id="genealogy_report_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="oe_structure"/>
                            
                            <!-- En-t√™te -->
                            <div class="text-center mb-4">
                                <h1>üå≥ Rapport de G√©n√©alogie</h1>
                                <h3><span t-field="doc.display_name"/></h3>
                                <p class="text-muted">Tra√ßabilit√© compl√®te du lot de semences</p>
                                <hr/>
                            </div>
                            
                            <!-- Informations du lot principal -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <div class="alert alert-primary">
                                        <h4>üì¶ Lot Principal</h4>
                                        <table class="table table-borderless text-white">
                                            <tr>
                                                <th>R√©f√©rence:</th>
                                                <td><span t-field="doc.name"/></td>
                                                <th>Vari√©t√©:</th>
                                                <td><span t-field="doc.variety_id.name"/></td>
                                            </tr>
                                            <tr>
                                                <th>Niveau:</th>
                                                <td><span t-field="doc.level"/></td>
                                                <th>Quantit√©:</th>
                                                <td><span t-field="doc.quantity"/> kg</td>
                                            </tr>
                                            <tr>
                                                <th>Production:</th>
                                                <td><span t-field="doc.production_date"/></td>
                                                <th>Statut:</th>
                                                <td><span t-field="doc.status"/></td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Lot Parent -->
                            <div t-if="doc.parent_lot_id" class="row mb-4">
                                <div class="col-12">
                                    <h4>‚¨ÜÔ∏è Lot Parent</h4>
                                    <table class="table table-bordered">
                                        <thead class="table-secondary">
                                            <tr>
                                                <th>R√©f√©rence</th>
                                                <th>Vari√©t√©</th>
                                                <th>Niveau</th>
                                                <th>Quantit√©</th>
                                                <th>Date Production</th>
                                                <th>Statut</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span t-field="doc.parent_lot_id.name"/></td>
                                                <td><span t-field="doc.parent_lot_id.variety_id.name"/></td>
                                                <td><span t-field="doc.parent_lot_id.level"/></td>
                                                <td><span t-field="doc.parent_lot_id.quantity"/> kg</td>
                                                <td><span t-field="doc.parent_lot_id.production_date"/></td>
                                                <td><span t-field="doc.parent_lot_id.status"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- Lots Descendants -->
                            <div t-if="doc.child_lot_ids" class="row mb-4">
                                <div class="col-12">
                                    <h4>‚¨áÔ∏è Lots Descendants (<t t-esc="len(doc.child_lot_ids)"/>)</h4>
                                    <table class="table table-bordered">
                                        <thead class="table-secondary">
                                            <tr>
                                                <th>R√©f√©rence</th>
                                                <th>Niveau</th>
                                                <th>Quantit√©</th>
                                                <th>Date Production</th>
                                                <th>Multiplicateur</th>
                                                <th>Statut</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr t-foreach="doc.child_lot_ids" t-as="child">
                                                <td><span t-field="child.name"/></td>
                                                <td><span t-field="child.level"/></td>
                                                <td><span t-field="child.quantity"/> kg</td>
                                                <td><span t-field="child.production_date"/></td>
                                                <td><span t-field="child.multiplier_id.name"/></td>
                                                <td><span t-field="child.status"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- Historique Contr√¥les Qualit√© -->
                            <div t-if="doc.quality_control_ids" class="row mb-4">
                                <div class="col-12">
                                    <h4>üî¨ Historique des Contr√¥les Qualit√©</h4>
                                    <table class="table table-bordered">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Date</th>
                                                <th>R√©f√©rence</th>
                                                <th>Germination</th>
                                                <th>Puret√©</th>
                                                <th>R√©sultat</th>
                                                <th>Inspecteur</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr t-foreach="doc.quality_control_ids.sorted('control_date', reverse=True)" t-as="qc">
                                                <td><span t-field="qc.control_date"/></td>
                                                <td><span t-field="qc.name"/></td>
                                                <td><span t-field="qc.germination_rate"/>%</td>
                                                <td><span t-field="qc.variety_purity"/>%</td>
                                                <td>
                                                    <span t-if="qc.result == 'pass'" class="badge badge-success">‚úì R√©ussi</span>
                                                    <span t-if="qc.result == 'fail'" class="badge badge-danger">‚ùå √âchec</span>
                                                    <span t-if="qc.result == 'pending'" class="badge badge-warning">‚è≥ En cours</span>
                                                </td>
                                                <td><span t-field="qc.inspector_id.name"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- Historique Productions -->
                            <div t-if="doc.production_ids" class="row mb-4">
                                <div class="col-12">
                                    <h4>üè≠ Historique des Productions</h4>
                                    <table class="table table-bordered">
                                        <thead class="table-light">
                                            <tr>
                                                <th>R√©f√©rence</th>
                                                <th>Multiplicateur</th>
                                                <th>Parcelle</th>
                                                <th>D√©but</th>
                                                <th>Fin</th>
                                                <th>Rendement</th>
                                                <th>Statut</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr t-foreach="doc.production_ids.sorted('start_date', reverse=True)" t-as="prod">
                                                <td><span t-field="prod.name"/></td>
                                                <td><span t-field="prod.multiplier_id.name"/></td>
                                                <td><span t-field="prod.parcel_id.name"/></td>
                                                <td><span t-field="prod.start_date"/></td>
                                                <td><span t-field="prod.end_date"/></td>
                                                <td><span t-field="prod.actual_yield"/> kg</td>
                                                <td><span t-field="prod.status"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- Graphique de flux (simplifi√©) -->
                            <div class="row mb-4">
                                <div class="col-12 text-center">
                                    <h4>üìä Flux de Tra√ßabilit√©</h4>
                                    <div class="alert alert-light">
                                        <div style="font-family: monospace; font-size: 14px; line-height: 2;">
                                            <div t-if="doc.parent_lot_id">
                                                <span t-field="doc.parent_lot_id.name"/> (<span t-field="doc.parent_lot_id.level"/>)
                                                <br/>‚Üì<br/>
                                            </div>
                                            <strong><span t-field="doc.name"/> (<span t-field="doc.level"/>)</strong>
                                            <div t-if="doc.child_lot_ids">
                                                <br/>‚Üì<br/>
                                                <span t-foreach="doc.child_lot_ids[:3]" t-as="child">
                                                    <span t-field="child.name"/> (<span t-field="child.level"/>)
                                                    <span t-if="not child_last"> | </span>
                                                </span>
                                                <div t-if="len(doc.child_lot_ids) > 3">
                                                    ... et <t t-esc="len(doc.child_lot_ids) - 3"/> autres
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Pied de page -->
                            <div class="row mt-4">
                                <div class="col-12 text-center text-muted">
                                    <hr/>
                                    <p>
                                        <small>
                                            Rapport g√©n√©r√© le <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%m/%Y √† %H:%M')"/><br/>
                                            Institut S√©n√©galais de Recherches Agricoles - Centre de Saint-Louis<br/>
                                            Syst√®me de Tra√ßabilit√© des Semences v1.0
                                        </small>
                                    </p>
                                </div>
                            </div>
                            
                            <div class="oe_structure"/>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <!-- Rapport Production -->
        <record id="report_production_summary" model="ir.actions.report">
            <field name="name">R√©sum√© de Production</field>
            <field name="model">seed.production</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">isra_seeds.production_summary_template</field>
            <field name="report_file">isra_seeds.production_summary_template</field>
            <field name="binding_model_id" ref="model_seed_production"/>
            <field name="binding_type">report</field>
        </record>

        <!-- Template R√©sum√© Production -->
        <template id="production_summary_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="text-center mb-4">
                                <h1>üìä R√©sum√© de Production</h1>
                                <h3><span t-field="doc.name"/></h3>
                                <hr/>
                            </div>
                            
                            <!-- Informations g√©n√©rales -->
                            <div class="row mb-4">
                                <div class="col-6">
                                    <h4>üåæ Informations G√©n√©rales</h4>
                                    <table class="table table-bordered">
                                        <tr><th>Lot de Semence</th><td><span t-field="doc.seed_lot_id.name"/></td></tr>
                                        <tr><th>Vari√©t√©</th><td><span t-field="doc.seed_lot_id.variety_id.name"/></td></tr>
                                        <tr><th>Multiplicateur</th><td><span t-field="doc.multiplier_id.name"/></td></tr>
                                        <tr><th>Parcelle</th><td><span t-field="doc.parcel_id.name"/></td></tr>
                                        <tr><th>Surface</th><td><span t-field="doc.parcel_id.area"/> ha</td></tr>
                                    </table>
                                </div>
                                <div class="col-6">
                                    <h4>üìÖ Calendrier</h4>
                                    <table class="table table-bordered">
                                        <tr><th>D√©but Production</th><td><span t-field="doc.start_date"/></td></tr>
                                        <tr><th>Fin Production</th><td><span t-field="doc.end_date"/></td></tr>
                                        <tr><th>Date Semis</th><td><span t-field="doc.sowing_date"/></td></tr>
                                        <tr><th>Date R√©colte</th><td><span t-field="doc.harvest_date"/></td></tr>
                                        <tr><th>Dur√©e</th><td><span t-field="doc.duration_days"/> jours</td></tr>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- R√©sultats -->
                            <div class="row mb-4">
                                <div class="col-12">
                                    <h4>üìà R√©sultats</h4>
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="card text-center">
                                                <div class="card-body">
                                                    <h5>Quantit√© Pr√©vue</h5>
                                                    <h3 class="text-primary"><span t-field="doc.planned_quantity"/> kg</h3>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="card text-center">
                                                <div class="card-body">
                                                    <h5>Rendement R√©el</h5>
                                                    <h3 class="text-success"><span t-field="doc.actual_yield"/> kg</h3>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="card text-center">
                                                <div class="card-body">
                                                    <h5>Rendement/Ha</h5>
                                                    <h3 class="text-info"><span t-field="doc.yield_per_hectare"/> kg/ha</h3>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Activit√©s principales -->
                            <div t-if="doc.activity_ids" class="row mb-4">
                                <div class="col-12">
                                    <h4>üìã Activit√©s Principales</h4>
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Type</th>
                                                <th>Description</th>
                                                <th>Responsable</th>
                                                <th>Co√ªt</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr t-foreach="doc.activity_ids.sorted('activity_date')" t-as="activity">
                                                <td><span t-field="activity.activity_date"/></td>
                                                <td><span t-field="activity.activity_type"/></td>
                                                <td><span t-field="activity.description"/></td>
                                                <td><span t-field="activity.responsible_user_id.name"/></td>
                                                <td><span t-field="activity.cost"/> FCFA</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- Probl√®mes rencontr√©s -->
                            <div t-if="doc.issue_ids" class="row mb-4">
                                <div class="col-12">
                                    <h4>‚ö†Ô∏è Probl√®mes Rencontr√©s</h4>
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Type</th>
                                                <th>Gravit√©</th>
                                                <th>Description</th>
                                                <th>Statut</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr t-foreach="doc.issue_ids.sorted('issue_date')" t-as="issue">
                                                <td><span t-field="issue.issue_date"/></td>
                                                <td><span t-field="issue.issue_type"/></td>
                                                <td><span t-field="issue.severity"/></td>
                                                <td><span t-field="issue.description"/></td>
                                                <td>
                                                    <span t-if="issue.resolved" class="badge badge-success">R√©solu</span>
                                                    <span t-if="not issue.resolved" class="badge badge-warning">En cours</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>

    </data>
</odoo>